metadata:
  name: Ijoka Analytics System
  created: 20251213-070000
  status: ready
overview: 'Build analytics modules for pattern detection, temporal analysis, agent
  profiling,

  and an agentic query interface. Uses graph algorithms and LLM-powered queries.

  '
research:
  approach: Graph-native analytics with Memgraph MAGE + Python statistical libraries
  libraries:
  - name: pandas
    reason: Time-series analysis and data transformation
  - name: numpy
    reason: Statistical computations
  patterns:
  - file: db.py:41-98
    description: IjokaClient class structure with session management
  - file: cli.py:feature_app
    description: Typer command group pattern
  - file: models.py
    description: Pydantic model patterns with enums
  specifications:
  - requirement: All analytics via graph queries (Memgraph)
    status: must_follow
  - requirement: CLI + API + SDK interfaces (DRY)
    status: must_follow
  - requirement: Agentic queries with safety validation
    status: must_follow
  dependencies:
    existing:
    - neo4j>=6.0.3
    - pydantic>=2.12.5
    - fastapi>=0.124.4
    new:
    - pandas>=2.0.0
    - numpy>=1.24.0
features:
- Pattern Detection Engine
- Temporal Analytics Engine
- Agent Behavior Profiler
- Insight Synthesizer
- Agentic Query Engine
- Self-Improvement Loop
tasks:
- id: task-0
  name: Data Model Extensions & Dependencies
  file: tasks/task-0.md
  priority: blocker
  dependencies: []
- id: task-1
  name: Pattern Detection Engine
  file: tasks/task-1.md
  priority: high
  dependencies:
  - task-0
- id: task-2
  name: Temporal Analytics Engine
  file: tasks/task-2.md
  priority: high
  dependencies:
  - task-0
- id: task-3
  name: Agent Behavior Profiler
  file: tasks/task-3.md
  priority: high
  dependencies:
  - task-0
- id: task-4
  name: Insight Synthesizer
  file: tasks/task-4.md
  priority: medium
  dependencies:
  - task-1
  - task-2
  - task-3
- id: task-5
  name: Agentic Query Engine
  file: tasks/task-5.md
  priority: medium
  dependencies:
  - task-4
- id: task-6
  name: CLI & API Integration
  file: tasks/task-6.md
  priority: medium
  dependencies:
  - task-1
  - task-2
  - task-3
- id: task-7
  name: Self-Improvement Loop
  file: tasks/task-7.md
  priority: low
  dependencies:
  - task-5
  - task-6
shared_resources:
  files:
  - path: src/ijoka/models.py
    reason: All tasks add new models
    mitigation: Task 0 creates all base models first
  - path: src/ijoka/db.py
    reason: Multiple tasks add methods
    mitigation: Each task adds to different section
  - path: pyproject.toml
    reason: Task 0 adds dependencies
    mitigation: Only task-0 modifies
  databases:
  - name: Memgraph
    concern: New node types and relationships
    mitigation: Task 0 defines all schema extensions upfront
testing:
  unit:
  - Each task writes own tests in tests/test_analytics_*.py
  - Mock graph database for unit tests
  integration:
  - Test against real Memgraph instance
  - Test CLI commands end-to-end
  isolation:
  - Each module has independent test file
  - Use test fixtures for sample data
success_criteria:
- All 6 analytics modules implemented
- 'CLI commands: ijoka analytics {patterns,velocity,profile,ask}'
- 'API endpoints: /analytics/*'
- Natural language queries work for common questions
- All tests passing
- Documentation updated
notes: '- Tasks 1, 2, 3 can run in PARALLEL after task-0 completes

  - Task 6 can start as soon as any of tasks 1-3 complete

  - Agentic query engine (task-5) is the crown jewel - prioritize after core analytics

  - Self-improvement (task-7) needs data accumulation - lower priority initially

  '
changelog:
- timestamp: 20251213-070000
  event: Plan created
